(function(){function h(b){this.url=[];this.init(b)}var l,m,u,f,y,z,q,E,r,w,v,B,C=0,D=0;_ver="tcss.3.2.1";window.Tcss={};var x="function"==typeof tracert&&"function"==typeof pgvGetColumn&&"function"==typeof pgvGetTopic&&"function"==typeof pgvGetDomainInfo&&"function"==typeof pgvGetRefInfo;if("undefined"==typeof t)var t=1;h.prototype={init:function(b){b?f=b:f={};l=document;if(!f.statIframe&&window!=top)try{l=top.document}catch(a){}"undefined"==typeof l&&(l=document);m=l.location;u=l.body;x&&(Tcss.d=
    l,Tcss.l=m);w=[];v=[];B=[]},PTTInfo:function(){window.PTTRun=new PTT;PTTRun.virtualURL=this.getDomainInfo().replace(/dm=|&url=/g,"");var b=[];b.push("pttplat="+PTTRun.plat);b.push("pttsitetype="+(PTTRun.project?PTTRun.project:"")+PTTRun.siteType);b.push("pttpagetype="+PTTRun.pageType);b.push("pttpagename="+encodeURIComponent(PTTRun.pageName));var a=b.join("&").trimAll();console.log(decodeURI(b.join(";\n")));return a},run:function(){var b=(new Date).getTime();var a=escape(this.PTTInfo());k.init();
    this.url.push(this.getDomainInfo());this.coverCookie();k.setCookie("ssid");k.save();this.url.unshift("https://pingfore."+this.getCookieSetDomain(y)+"/pingd?");this.url.push(this.getRefInfo(f));try{navigator.cookieEnabled?this.url.push("&pvid="+k.setCookie("pgv_pvid",!0)):this.url.push("&pvid=NoCookie")}catch(d){this.url.push("&pvid=NoCookie")}this.url.push(this.getMainEnvInfo());this.url.push(this.getExtendEnvInfo());Tcss.pgUserType="";if(f.pgUserType||f.reserved2){var c=f.pgUserType||f.reserved2;
    c=escape(c.substring(0,256));Tcss.pgUserType=c;B.push("pu="+Tcss.pgUserType)}x&&(pgvGetColumn(),pgvGetTopic(),this.url.push("&column="+Tcss.column+"&subject="+Tcss.subject),tracert());this.url.push("&vs="+_ver);k.setCookie("ts_uid",!0);c=(new Date).getTime();w.push("tm="+(c-b));C&&w.push("ch="+C);this.url.push("&ext="+a);this.url.push("&hurlcn="+escape(v.join(";")));this.url.push("&rand="+Math.round(1E5*Math.random()));"undefined"==typeof _speedMark?this.url.push("&reserved1=-1"):this.url.push("&reserved1="+
    (new Date-_speedMark));(b=this.getSud())&&B.push("su="+escape(b.substring(0,256)));this.url.push("&tt="+escape(B.join(";")));this.sendInfo(this.url.join(""));1==D&&(b=this.getParameter("tcss_rp_dm",l.URL),b!=Tcss.dm&&(b=this.url.join("").replace(/\?dm=(.*?)&/,"?dm="+b+"&"),this.sendInfo(b)));f.hot&&(document.attachEvent?document.attachEvent("onclick",function(a){pgvWatchClick(a)}):document.addEventListener("click",function(a){pgvWatchClick(a)},!1));f.repeatApplay&&"true"==f.repeatApplay&&"undefined"!=
    typeof t&&(t=1)},getSud:function(){return f.sessionUserType?f.sessionUserType:this.getParameter(f.sudParamName||"sessionUserType",l.URL)},coverCookie:function(){if(f.crossDomain&&"on"==f.crossDomain){var b=this.getParameter("tcss_uid",l.URL),a=this.getParameter("tcss_sid",l.URL),c=this.getParameter("tcss_refer",l.URL),d=this.getParameter("tcss_last",l.URL);a&&b&&(D=1,k.setCookie("ssid",!1,a),k.save(),k.setCookie("ts_refer",!0,c),k.setCookie("ts_last",!0,d),k.setCookie("pgv_pvid",!0,b))}},getDomainInfo:function(b){var a=
    m.hostname.toLowerCase();f.virtualDomain&&(v.push("ad="+a),a=f.virtualDomain);this.getCurrentUrl();Tcss.dm=a;x&&pgvGetDomainInfo();y=Tcss.dm;z||(z=this.getCookieSetDomain(m.hostname.toLowerCase()),x&&(Tcss.domainToSet=z));b&&(Tcss.dm+=".hot");return"dm="+Tcss.dm+"&url="+Tcss.url},getCurrentUrl:function(){var b="-";var a=escape(m.pathname);""!=m.search&&(b=escape(m.search.substr(1)));if(f.senseParam){var c=this.getParameter(f.senseParam,l.URL);c&&(a+="_"+c)}f.virtualURL&&(v.push("au="+a),a=f.virtualURL);
    Tcss.url=a;Tcss.arg=b},getRefInfo:function(b){var a="-",c="-",d="-",e=l.referrer;b=this.getParameter(b.tagParamName||"ADTAG",l.URL);var g=e.indexOf("://");-1<g&&(g=e.match(/(\w+):\/\/([^:|\/]+)(:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i))&&(a=g[2],c=g[4]+(g[5]?g[5]:""));-1!=e.indexOf("?")&&(g=e.indexOf("?")+1,d=e.substr(g));e=a;f.virtualRefDomain&&("-"!=a&&v.push("ard="+a),a=f.virtualRefDomain);f.virtualRefURL&&("-"!=c&&v.push("aru="+escape(c)),c=f.virtualRefURL);var A;b&&(A=a+c,a="ADTAG",c=b);q=a;
    E=escape(c);if("-"==q||"ADTAG"==q&&"-"==e)a=k.get("ts_last=",!0),"-"!=a&&w.push("ls="+a);k.setCookie("ts_last",!0,escape((m.hostname+m.pathname).substring(0,128)));a=k.get("ts_refer=",!0);"-"!=a&&w.push("rf="+a);e=m.hostname;f.inner&&(e=","+e+","+f.inner+",");"-"==q||-1<(","+e+",").indexOf(q)||1==D||(c=escape((q+c).substring(0,128)),c!=a&&(C=2),k.setCookie("ts_refer",!0,c));Tcss.rdm=q;Tcss.rurl=E;Tcss.rarg=escape(d);x&&pgvGetRefInfo();return A?"&rdm="+Tcss.rdm+"&rurl="+Tcss.rurl+"&rarg="+Tcss.rarg+
    "&or="+A:"&rdm="+Tcss.rdm+"&rurl="+Tcss.rurl+"&rarg="+Tcss.rarg},getMainEnvInfo:function(){var b="";try{var a="-",c="-",d="-",e="-",g="-",f=0,n=navigator;self.screen&&(a=screen.width+"x"+screen.height,c=screen.colorDepth+"-bit");n.language?d=n.language.toLowerCase():n.browserLanguage&&(d=n.browserLanguage.toLowerCase());f=n.javaEnabled()?1:0;e=n.platform;g=(new Date).getTimezoneOffset()/60;b="&scr="+a+"&scl="+c+"&lang="+d+"&java="+f+"&pf="+e+"&tz="+g}catch(F){}finally{return b}},getExtendEnvInfo:function(){var b=
    "";try{var a=m.href,c="-";b+="&flash="+this.getFlashInfo();u.addBehavior&&(u.addBehavior("#default#homePage"),u.isHomePage(a)&&(b+="&hp=Y"));u.addBehavior&&(u.addBehavior("#default#clientCaps"),c=u.connectionType);b+="&ct="+c}catch(d){}finally{return b}},getFlashInfo:function(){var b="-",a=navigator;try{if(a.plugins&&a.plugins.length)for(var c=0;c<a.plugins.length;c++){if(-1<a.plugins[c].name.indexOf("Shockwave Flash")){b=a.plugins[c].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(c=
    12;5<=c;c--)try{if(eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+c+"');")){b=c+".0";break}}catch(d){}}catch(d){}return b},getParameter:function(b,a){return b&&a?(b=a.match(new RegExp("(\\?|#|&)"+b+"=([^&^#]*)(#|&|$)")))?b[2]:"":""},getCookieSetDomain:function(b){var a,c,d=[];for(c=a=0;c<b.length;c++)"."==b.charAt(c)&&(d[a]=c,a++);a=d.length;-1<b.indexOf(".cn")&&a--;c="qq.com";1==a?c=b:1<a&&(c=b.substring(d[a-2]+1));return c},watchClick:function(b){try{var a=!0,c="";var d=window.event?window.event.srcElement:
    b.target;switch(d.tagName){case "A":c="<A href="+d.href+">"+d.innerHTML+"</a>";break;case "IMG":c="<IMG src="+d.src+">";break;case "INPUT":c="<INPUT type="+d.type+" value="+d.value+">";break;case "BUTTON":c="<BUTTON>"+d.innerText+"</BUTTON>";break;case "SELECT":c="SELECT";break;default:a=!1}if(a){var e=new h(f),g=e.getElementPos(d);if(f.coordinateId){var A=e.getElementPos(document.getElementById(f.coordinateId));g.x-=A.x}e.url.push(e.getDomainInfo(!0));e.url.push("&hottag="+escape(c));e.url.push("&hotx="+
    g.x);e.url.push("&hoty="+g.y);e.url.push("&rand="+Math.round(1E5*Math.random()));e.url.unshift("https://pingfore."+this.getCookieSetDomain(y)+"/pingd?");e.sendInfo(e.url.join(""))}}catch(n){}},getElementPos:function(b){if(null===b.parentNode||"none"==b.style.display)return!1;var a=navigator.userAgent.toLowerCase(),c=null;if(b.getBoundingClientRect)return a=b.getBoundingClientRect(),b=Math.max(document.documentElement.scrollTop,document.body.scrollTop),c=Math.max(document.documentElement.scrollLeft,
    document.body.scrollLeft),{x:a.left+c-document.body.clientLeft,y:a.top+b-document.body.clientTop};if(document.getBoxObjectFor){a=document.getBoxObjectFor(b);var d=[a.x-(b.style.borderLeftWidth?Math.floor(b.style.borderLeftWidth):0),a.y-(b.style.borderTopWidth?Math.floor(b.style.borderTopWidth):0)]}else{d=[b.offsetLeft,b.offsetTop];c=b.offsetParent;if(c!=b)for(;c;)d[0]+=c.offsetLeft,d[1]+=c.offsetTop,c=c.offsetParent;if(-1<a.indexOf("opera")||-1<a.indexOf("safari")&&"absolute"==b.style.position)d[0]-=
    document.body.offsetLeft,d[1]-=document.body.offsetTop}for(c=b.parentNode?b.parentNode:null;c&&"BODY"!=c.tagName&&"HTML"!=c.tagName;)d[0]-=c.scrollLeft,d[1]-=c.scrollTop,c=c.parentNode?c.parentNode:null;return{x:d[0],y:d[1]}},pgvGetArgs:function(){this.getDomainInfo();var b=[];b.push("tcss_rp_dm="+Tcss.dm);b.push("tcss_uid="+k.get("pgv_pvid=",!0));b.push("tcss_sid="+k.get("ssid=",!0));b.push("tcss_refer="+k.get("ts_refer=",!0));b.push("tcss_last="+k.get("ts_last=",!0));return b.join("&")},sendClickForPTT:function(){f.hottag&&
    (this.url.push(this.getDomainInfo(!0)),this.url.push("&hottag="+f.hottag),this.url.push("&hotx=9999&hoty=9999"),this.url.push("&rand="+Math.round(1E5*Math.random())),this.url.unshift("https://pingfore."+this.getCookieSetDomain(y)+"/pingd?"),this.sendInfo(this.url.join("")))},tgideasCount:function(b){this.sendInfo("https://pingfore."+this.getCookieSetDomain(y)+"/pingd?dm=tgideas.qq.com.hot&url=/&hottag="+encodeURIComponent(b)+"&hotx=9999&hoty=9999&rand="+Math.round(1E5*Math.random()))},sendInfo:function(b){window.navigator.sendBeacon?
    window.navigator.sendBeacon(b):(r=new Image(1,1),Tcss.img=r,r.onload=r.onerror=r.onabort=function(){r.onload=r.onerror=r.onabort=null;Tcss.img=null},r.src=b)}};var k={sck:[],sco:{},init:function(){var b=this.get("pgv_info=",!0);if("-"!=b){b=b.split("&");for(var a=0;a<b.length;a++){var c=b[a].split("=");this.set(c[0],unescape(c[1]))}}},get:function(b,a){var c=a?l.cookie:this.get("pgv_info=",!0),d="-";var e=c.indexOf(b);-1<e&&(e+=b.length,d=c.indexOf(";",e),-1==d&&(d=c.length),a||(b=c.indexOf("&",e),
    -1<b&&(d=Math.min(d,b))),d=c.substring(e,d));return d},set:function(b,a){this.sco[b]=a;a=!1;for(var c=this.sck.length,d=0;d<c;d++)if(b==this.sck[d]){a=!0;break}a||this.sck.push(b)},setCookie:function(b,a,c){var d=m.hostname,e=k.get(b+"=",a);if("-"!=e||c)e=c?c:e;else{switch(b){case "ts_uid":w.push("nw=1");break;case "ssid":C=1}a?e="":e="s";c=(new Date).getUTCMilliseconds();e+=Math.round(2147483647*Math.abs(Math.random()-1))*c%1E10}if(a)switch(b){case "ts_uid":this.saveCookie(b+"="+e,d,this.getExpires(1051200));
    break;case "ts_refer":this.saveCookie(b+"="+e,d,this.getExpires(259200));break;case "ts_last":this.saveCookie(b+"="+e,d,this.getExpires(30));break;default:this.saveCookie(b+"="+e,z,"expires=Sun, 18 Jan 2038 00:00:00 GMT;")}else this.set(b,e);return e},getExpires:function(b){var a=new Date;a.setTime(a.getTime()+6E4*b);return"expires="+a.toGMTString()},save:function(){if(f.sessionSpan){var b=new Date;b.setTime(b.getTime()+6E4*f.sessionSpan)}for(var a="",c=this.sck.length,d=0;d<c;d++)a+=this.sck[d]+
    "="+this.sco[this.sck[d]]+"&";a="pgv_info="+a.substr(0,a.length-1);c="";b&&(c="expires="+b.toGMTString());this.saveCookie(a,z,c)},saveCookie:function(b,a,c){l.cookie=b+";path=/;domain="+a+";"+c}};window.pgvMain=function(b,a){var c="";a?(c=a,_ver="tcsso.3.2.1"):(c=b,_ver="tcss.3.2.1");try{x&&("undefined"!=typeof pvRepeatCount&&1==pvRepeatCount?(t=1,pvRepeatCount=2):t=2),1==t&&(t=2,"undefined"!=typeof PTTDate&&(PTTRun.newStayTime(Math.round((new Date-PTTDate)/1E3)),PTTDate=new Date),(new h(c)).run()),
    "undefined"==typeof PTTDate&&(window.PTTDate=new Date,PTTRun.addEvent(window,"onpagehide"in window?"pagehide":"unload",function(){PTTRun.newStayTime(Math.round((new Date-PTTDate)/1E3))})),PTTRun.autoSend(),"function"==typeof PTTCallback&&PTTCallback(),window.onerror=function(a,b,c){MossoSendClick("ptterror",a+"|||"+b.split("?")[0]+"|||"+c,PTTRun.PTTSystem+PTTRun.PTTSystemVer+"|||"+PTTRun.PTTBrowser+PTTRun.PTTBrowserVer+"|||"+PTTRun.PTTNetType,PTTRun.virtualURL)},PTTPerformanceTiming=function(){var a=
    window.performance,b=this;if(a){var c=a.timing,f,n,h;b.detectPage=function(){window.setTimeout(function(){0<c.loadEventEnd?b.reportData():b.detectPage()},50)};b.reportData=function(){var a=PTTRun.PTTSystem+PTTRun.PTTSystemVer+"|||"+PTTRun.PTTBrowser+PTTRun.PTTBrowserVer+"|||"+PTTRun.PTTNetType;f=(c.loadEventEnd-c.navigationStart)/1E3;MossoSendClick("pttloadpage",5<f?"C":3<f?"B":1<f?"A":"S",a,PTTRun.virtualURL);n=(c.domComplete-c.responseEnd)/1E3;MossoSendClick("pttdomready",1>n?"S":"A",a,PTTRun.virtualURL);
    h=(c.domInteractive-c.navigationStart)/1E3;MossoSendClick("pttblank",1.5<h?"C":1<h?"B":.5<h?"A":"S",a,PTTRun.virtualURL)};b.detectPage()}else console.log("\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 performance \u63a5\u53e3")},PTTPerformanceTiming()}catch(d){}};window.pgvSendClickForPTT=function(b){(new h(b)).sendClickForPTT()};window.pgvSendClick=function(b){if("undefined"!=typeof setSite&&"undefined"!=typeof PTTSendClick){var a=b.hottag?b.hottag.split("."):0;if(b.hottag&&2<=a.length){var c=
    a[a.length-2].trimAll(),d=a[a.length-1].trimAll();console.log(decodeURI(c+":"+d))}else console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u7684\u6309\u94ae\u53c2\u6570\u6709\u8bef");PTTSendClick(c,d,"\u65e7\u57cb\u70b9")}else pgvSendClickForPTT(b)};window.pgvWatchClick=function(b){(new h(b)).watchClick(b)};window.pgvGetArgs=function(b){return(new h(b)).pgvGetArgs()};window.PTT=function(){console.log("\u60a8\u6b63\u5728\u4f7f\u7528PTT\u6570\u636e\u4e0a\u62a5\u7ec4\u4ef6\uff0c\u5e2e\u52a9\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/");
    var b=this;b.PTTDomain=document.referrer;b.addEvent=function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1)};b.getParameterByName=function(a){a=a.toLowerCase().replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.search.toLowerCase());return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))};b.getData=function(a){a+="=";for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1,
    g.length);if(0==g.indexOf(a))return unescape(g.substring(a.length,g.length))}return!1};b.setData=function(a,b,d,e){d=d||0;e=e||"/";var c="";0!=d&&(c=new Date,c.setTime(c.getTime()+864E5*d),c="; expires="+c.toGMTString());document.cookie=a+"="+escape(b)+c+"; path="+e};b.getSession=function(a){if(window.sessionStorage)return sessionStorage.getItem(a);a+="=";for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(a))return unescape(g.substring(a.length,
    g.length))}return!1};String.prototype.trimAll=function(){return this.replace(/\s/g,"")};Number.prototype.replace=function(){return this+""};b.splitVirtualStr=function(a){var b=["",""];a&&(a=a&&-1==a.indexOf("//")?a:a.split("//")[1],/^\//.test(a)?b[1]=a:-1==a.indexOf("/")?b[0]=a:(b[0]=a.substring(0,a.indexOf("/")),b[1]=a.substring(a.indexOf("/"),a.length)));return b};window.MossoSendClick=function(a,c,d,e){if("undefined"==typeof setSite)return console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u9700\u8981\u5728\u9875\u9762\u91cc\u914d\u7f6esetSite,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),
    !1;a=""==a||"undefined"==typeof a?"":"_"+a.replace(/_|\./g,"*-*");c=""==c||"undefined"==typeof c?"":"_"+c.replace(/_|\./g,"*-*");d="undefined"==typeof d?"":d.replace(/_|\./g,"*-*");a=(b.plat+"."+b.project+b.siteType+"."+b.pageType+a+c+"_"+d+"."+b.from).trimAll();a=encodeURIComponent(a);b.getData("PTTdebug")&&"0"==b.getData("PTTdebug")||console.log(decodeURI("a:"+a));e=b.splitVirtualStr(e);pgvSendClickForPTT({hottag:a,virtualDomain:e[0],virtualURL:e[1]})};window.PTTSendClick=function(a,c,d,e){if("undefined"==
    typeof setSite)return console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u9700\u8981\u5728\u9875\u9762\u91cc\u914d\u7f6esetSite,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),!1;MossoSendClick(a,c,d,e);a=b.project+b.oldSiteType+"."+b.pageType+(""==a||"undefined"==typeof a?"":"."+a)+(""==c||"undefined"==typeof c?"."+b.from:"."+c);a=a.trimAll();b.getData("PTTdebug")&&"0"==b.getData("PTTdebug")||console.log(decodeURI("b:"+
    a));e=b.splitVirtualStr(e);pgvSendClickForPTT({hottag:a,virtualDomain:e[0],virtualURL:e[1]})};window.PTTDebug=function(a){b.setData("PTTdebug",a)};b.unitParams=function(){var a=navigator.userAgent.toLowerCase();b.osact="undefined"==typeof setSite?!1:"os"==setSite.siteType.toLowerCase()?0:"undefined"!=typeof setSite.osact||b.getParameterByName("osact")?1*setSite.osact||1*b.getParameterByName("osact"):0;b.project=function(){var a="base ingame doujin match story history fans coming bbs other".split(" ");
    if("undefined"!=typeof setSite&&"undefined"==typeof setSite.project)return"undefined"!=typeof setSite.siteType&&"os"==setSite.siteType.toLowerCase()?"base_":"other_";if(-1!=a.join("*_*").indexOf(setSite.project.replace(/_|\./g,"*-*")))return setSite.project.replace(/_|\./g,"*-*")+"_";console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u8bbe\u7f6e\u7684project\u53c2\u6570\u503c\u6709\u8bef\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u8bbe\u7f6e\u503c\u4e3a:"+a.join(",")+"\u8bf7\u68c0\u67e5")}();if("undefined"==
    typeof setSite||"undefined"==typeof setSite.siteType){console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u8fd8\u672a\u914d\u7f6esetSite.siteType\u7684\u503c,\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/");var c=void 0}else c="os"!=setSite.siteType?"1"==b.osact?setSite.siteType.toLowerCase().replace(/_|\./g,"*-*")+"_osact":setSite.siteType.toLowerCase().replace(/_|\./g,"*-*"):"os";b.siteType=c;"undefined"==typeof setSite||"undefined"==
    typeof setSite.pageType?(console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u9700\u8981\u914d\u7f6esetSite.pageType\u7684\u503c,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),c=void 0):c=setSite.pageType.replace(/_|\./g,"*-*");b.pageType=c;c="undefined"!=typeof setSite&&"undefined"!=typeof setSite.pageName?setSite.pageName.replace(/_|\./g,"*-*"):void 0;b.pageName=c;c=-1==a.indexOf("msdk")&&-1==a.indexOf("15d60")&&-1==a.indexOf("ingame")&&
    "undefined"==typeof pandora||-1!=a.indexOf("gamehelper")?0:1;b.ingame=c;b.plat=function(){if(b.ingame)var d="dcv_ingame";else-1!=a.indexOf("qq/")?d="dcv_qq":-1!=a.indexOf("micromessenge")?(d="dcv_wx",b.getSession("channel")):d=-1!=a.indexOf("gamehelper")?"dcv_helper":-1!=a.indexOf("weibo")?"dcv_weibo":-1<a.indexOf("iphone")||-1<a.indexOf("ipad")||-1<a.indexOf("ipod")||-1<a.indexOf("android")?"dcv_other":"dcv_pc";return d}();b.from=function(){var a="other",c=b.getSession("channel");"undefined"!=typeof b.PTTDomain&&
    (""==b.PTTDomain?a="direct":-1<b.PTTDomain.indexOf("baidu.com")?a="seo_baidu":-1<b.PTTDomain.indexOf("sogou.com")?a="seo_sogou":-1<b.PTTDomain.indexOf("sm.cn")?a="seo_sm":-1<b.PTTDomain.indexOf("so.com")?a="seo_360":-1<b.PTTDomain.indexOf("bing.com")?a="seo_bing":-1<b.PTTDomain.indexOf("google.com")&&(a="seo_google"));if(b.getParameterByName("adtag")){a=[];for(var g=b.getParameterByName("adtag").split("."),f=0,h=g.length;f<h;f++)4>f&&a.push(g[f]);a="adtag_"+a.join("_")}c&&-1!=c.indexOf("seo")&&(a=
    c);return a}();b.oldSiteType="os"==b.siteType?"dcv_pc"==b.plat?"gwpc":"1"==b.ingame?"ingame":"gwm":b.siteType;b.oldUser=function(){var a=b.getData("PTTuserFirstTime");if(a)return a=(new Date).getTime()-a,a/=864E5,2>a?"is2daysUser":7>a?"is1weekUser":30>a?"is1MonthUser":"more1Month";b.setData("PTTuserFirstTime",(new Date).getTime(),365);return"newUsers"}();b.reach=function(){var a=b.getData("PTTweekStartTime"),c=b.getData("PTTweekPerSession"),f=b.getData("PTTperWeekNum")?b.getData("PTTperWeekNum"):
    0;if(a){if(c)return"";b.setData("PTTweekPerSession",(new Date).getTime());f++;b.setData("PTTperWeekNum",f,7);MossoSendClick("reach","reach"+f,"\u5468\u8bbf",PTTRun.virtualURL)}else b.setData("PTTperWeekNum",1,7),b.setData("PTTweekStartTime",(new Date).getTime(),7),MossoSendClick("reach","reach1","\u5468\u8bbf",PTTRun.virtualURL)};b.routeLine=function(){if("undefined"==typeof setSite||"undefined"==typeof setSite.siteType)return!1;var a=b.getData("PTTrouteLine")?b.getData("PTTrouteLine")+"_":"";if(7>=
    a.split("_").length){var c="os"!=setSite.siteType?b.siteType.split("_")[0]:b.pageType;a+=c;b.setData("PTTrouteLine",a);MossoSendClick("route",a,"\u8def\u5f84",PTTRun.virtualURL)}else return""};b.getAv=function(){var a=b.getData("PTTosav"),c=b.getData("PTTav");if(-1!=b.siteType.indexOf("os")||-1!=b.siteType.indexOf("_osact")){if(a)return"";b.setData("PTTosav","osav",365);MossoSendClick("osav","","\u5b98\u7f51\u5386\u603b",PTTRun.virtualURL)}else{if(c)return"";b.setData("PTTav","actav",365,location.pathname.substring(0,
    location.pathname.lastIndexOf("/")+1));MossoSendClick("actav","","\u4e13\u9898\u5386\u603b",PTTRun.virtualURL)}};b.PTTSystem=function(){var b=navigator.platform.toLowerCase();return-1!=a.indexOf("android")?"android":-1!=a.indexOf("iphone")?"iphone":-1!=a.indexOf("ipad")?"ipad":-1!=a.indexOf("ipod")?"ipod":"win32"==b||"windows"==b?"windows":"mac68k"==b||"macppc"==b||"macintosh"==b||"macIntel"==b?"mac":"x11"==b?"unix":"other"}();b.PTTSystemVer=function(){switch(b.PTTSystem){case "android":var d=-1!=
    a.indexOf("android/")?a.substr(a.indexOf("android")+8,a.indexOf(" ",a.indexOf("android"))-a.indexOf("android")-8).split(" ")[0]:a.substr(a.indexOf("android")+8,a.indexOf(";",a.indexOf("android"))-a.indexOf("android")-8).split(" ")[0];break;case "iphone":d="iphone os";d=a.substr(a.indexOf(d)+10,a.indexOf(" like ",a.indexOf(d))-a.indexOf(d)-10);break;case "windows":d=-1<a.indexOf("windows nt 5.0")||-1<a.indexOf("windows 2000")?"win2000":-1<a.indexOf("windows nt 5.1")||-1<a.indexOf("windows xp")?"winXP":
    -1<a.indexOf("windows nt 5.2")||-1<a.indexOf("windows 2003")?"win2003":-1<a.indexOf("windows nt 6.0")||-1<a.indexOf("windows vista")?"winVista":-1<a.indexOf("windows nt 6.1")||-1<a.indexOf("windows 7")?"win7":-1<a.indexOf("windows nt 6.2")||-1<a.indexOf("windows 8")?"win8":-1<a.indexOf("windows nt 10")||-1<a.indexOf("windows 10")?"win10":"other";break;case "ipad":d=a.substr(a.indexOf("cpu os")+7,a.indexOf(" like ",a.indexOf("cpu os"))-a.indexOf("cpu os")-7);break;case "mac":d=a.substr(a.indexOf("intel mac os x")+
    15,a.indexOf(")",a.indexOf("intel mac os x"))-a.indexOf("intel mac os x")-15);break;case "ipod":d=a.substr(a.indexOf(d)+10,a.indexOf(" like ",a.indexOf(d))-a.indexOf(d)-10);break;default:d="unknown"}return d}();b.detectBrowser=function(){var d="";var c=b.PTTSystem;switch("android"==c||"iphone"==c||"ipad"==c||"ipod"==c?"mobile":"pc"){case "mobile":-1!=a.indexOf("msdk")?(c="msdk",d=a.split("msdk/")[1]):-1!=a.indexOf("micromessenger")?(c="weixin",d=a.split("micromessenger/")[1].split(" ")[0]):-1!=a.indexOf("qq/")?
    (c="qq",d=a.split("qq/")[1].split(" ")[0]):-1!=a.indexOf("mqqbrowser")?(c="mqqbrowser",d=a.split("mqqbrowser/")[1].split(" ")[0]):-1!=a.indexOf("weibo")?(c="sina",d=a.split("applewebkit/")[1].split(" ")[0]):-1!=a.indexOf("ucbrowser")?(c="uc",d=a.split("ucbrowser/")[1].split(" ")[0]):-1!=a.indexOf("baiduboxapp")?(c="baidubrowser",d=a.split("baiduboxapp/")[1].split(" ")[0]):-1!=a.indexOf("chrome")||-1!=a.indexOf("crios")?(c="chrome",-1!=a.indexOf("chrome")&&(d=a.split("chrome/")[1].split(" ")[0]),-1!=
    a.indexOf("crios")&&(d=a.split("crios/")[1].split(" ")[0])):-1!=a.indexOf("android")?(c="original",d=-1!=a.indexOf("applewebkit/")?a.split("applewebkit/")[1].split(" ")[0]:"0"):-1!=a.indexOf("mac os x")?(c="safari",d=a.split("applewebkit/")[1].split(" ")[0]):(c=a.trimAll(),d="unmobile");break;case "pc":/chrome\/\d+/.test(a)?(d=/(chrome)\/(\d+)/.exec(a),c=d[1],-1!=a.indexOf("metasr")&&(c="sogou"),d=d[2]):-1!=a.indexOf("qqbrowser")?(c="qqbrowser",d=a.split("qqbrowser/")[1].split(" ")[0]):/msie \d+\.\d+/.test(a)?
    (d=/ms(ie) (\d+\.\d+)/.exec(a),c=d[1],d=d[2]):-1!=a.indexOf("trident/7.0")?(c="IE",d=/(rv):(\d+)/.exec(navigator.userAgent.toLowerCase())[2]):/firefox(\/\d+\.\d+)/.test(a)?(d=/(firefox)\/(\d+\.\d+)/.exec(a),c=d[1],d=d[2]):/version\/(\d+\.\d) (safari)/.test(a)?(d=/version\/(\d+\.\d) (safari)/.exec(a),c=d[2],d=d[1]):/opera.+version\/\d+\.\d+/.test(a)?(d=/(opera).+version\/(\d+)\.\d+/.exec(a),c=d[1],d=d[2]):(c="unknown",d="unwindow");break;default:c="unknown",d="unpc"}b.PTTBrowser=c;b.PTTBrowserVer=
    parseFloat(d.split(".")[0]+"."+d.split(".")[1]);MossoSendClick("browserInfo",b.PTTBrowser+b.PTTBrowserVer,"\u6d4f\u89c8\u5668\u4fe1\u606f",PTTRun.virtualURL)};b.PTTNetType=function(){if(-1!=a.indexOf("nettype/")){var b=-1==a.indexOf(" ",a.indexOf("nettype/"))?20:a.indexOf(" ",a.indexOf("nettype/"))-a.indexOf("nettype/")-8;b=a.substr(a.indexOf("nettype/")+8,b)}else b="undefined"!=typeof navigator.connection&&"undefined"!=typeof navigator.connection.type?navigator.connection.type:-1!=a.indexOf("iphone")||
    -1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")||-1!=a.indexOf("android")?"mobileUnknown":"PCNetwork";return b}();b.getPixel=function(){var c=document.documentElement.clientWidth,e=document.documentElement.clientHeight,f=window.devicePixelRatio?window.devicePixelRatio:1;if(-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")||-1!=a.indexOf("android")){var h=window.screen.width,n=c,k=window.screen.height;Math.max(h,k)==n?n=h:k*=c/h;n>k&&(h=k,k=n,n=h);c>e&&(h=e,e=c,c=h)}else n=window.screen.width,
    k=window.screen.height;b.PTTPixelWidth=parseInt(n*f);b.PTTPixelHeight=parseInt(k*f);b.PTTViewPixelWidth=parseInt(c*f);b.PTTViewPixelHeight=parseInt(e*f);MossoSendClick("devicesize",b.PTTPixelWidth+"x"+b.PTTPixelHeight,"\u8bbe\u5907\u5c3a\u5bf8",PTTRun.virtualURL);MossoSendClick("viewsize",b.PTTViewPixelWidth+"x"+b.PTTViewPixelHeight,"\u53ef\u89c6\u5c3a\u5bf8",PTTRun.virtualURL)}};b.unitParams();b.autoSend=function(){-1==location.href.indexOf("qq.com/ingame")&&-1==location.href.indexOf("qq.com/g/")||
    MossoSendClick("mc","","\u5fae\u793e\u533a",PTTRun.virtualURL);b.routeLine();b.getAv();b.reach();MossoSendClick("systemInfo",b.PTTSystem+b.PTTSystemVer,"\u7cfb\u7edf\u4fe1\u606f",PTTRun.virtualURL);b.detectBrowser();b.getPixel();MossoSendClick("netType",b.PTTNetType,"\u7f51\u7edc\u7c7b\u578b",PTTRun.virtualURL);switch(b.oldUser){case "newUsers":MossoSendClick("user","newUsers","\u9996\u6b21\u8fdb\u5165",PTTRun.virtualURL);break;case "is2daysUser":MossoSendClick("user","is2daysUser","\u6b21\u7559",
    PTTRun.virtualURL);break;case "is1weekUser":MossoSendClick("user","is1weekUser","\u5468\u7559",PTTRun.virtualURL);break;case "is1MonthUser":MossoSendClick("user","is1MonthUser","\u6708\u7559",PTTRun.virtualURL);break;case "more1Month":MossoSendClick("user","more1Month","\u8001\u7528\u6237",PTTRun.virtualURL)}b.exposure(window)};b.exposure=function(a){function c(b,c,d){var f=a.document.body;if(void 0===c||"function"===typeof c)d=c,c={};f=c.container||f;c=c.offset||0;for(var p=0;p<m.length;p++)if(m[p].container===
    f)return m[p].isInViewport(b,c,d);return m[m.push(e(f))-1].isInViewport(b,c,d)}function d(a,b,c){var d;return function(){var e=this,f=arguments,p=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b);p&&a.apply(e,f)}}function e(c){function e(a,b,c){return{watch:function(){g.add(a,b,c)},dispose:function(){g.remove(a)}}}function p(b,d){if(!(u(a.document.documentElement,b)&&u(a.document.documentElement,c)&&b.offsetWidth&&b.offsetHeight))return!1;var e=b.getBoundingClientRect();if(c===
    a.document.body){b=-d;var f=-d;var g=a.document.documentElement.clientWidth+d;d=a.document.documentElement.clientHeight+d}else{var p=c.getBoundingClientRect();b=p.top-d;f=p.left-d;g=p.right+d;d=p.bottom+d}return e.right>=f&&e.left<=g&&e.bottom>=b&&e.top<=d}var g=f(),k=c===a.document.body?a:c,l=d(g.checkAll(function(a,b,c){p(a,b)&&(g.remove(a),c(a))}),15);b.addEvent(k,"scroll",l);k===a&&b.addEvent(a,"resize",l);r&&h(g,c,l);setInterval(l,150);return{container:c,isInViewport:function(a,b,c){if(!c)return p(a,
    b);a=e(a,b,c);a.watch();return a}}}function f(){function a(a){for(var b=c.length-1;0<=b;b--)if(c[b][0]===a)return b;return-1}function b(b){return-1!==a(b)}var c=[];return{add:function(a,d,e){b(a)||c.push([a,d,e])},remove:function(b){b=a(b);-1!==b&&c.splice(b,1)},isWatched:b,checkAll:function(a){return function(){for(var b=c.length-1;0<=b;b--)a.apply(this,c[b])}}}}function h(a,b,c){function d(b){b=g.call([],Array.prototype.slice.call(b.addedNodes),b.target);return 0<f.call(b,a.isWatched).length}var e=
    new MutationObserver(function(a){!0===a.some(d)&&setTimeout(c,0)}),f=Array.prototype.filter,g=Array.prototype.concat;e.observe(b,{childList:!0,subtree:!0,attributes:!0})}function k(b){var c=[];if("function"==typeof a.document.querySelectorAll)c=Array.prototype.slice.call(a.document.querySelectorAll("["+b+"]"));else for(var d=document.getElementsByTagName("*"),e=0;e<d.length;e++){var f=d[e];f.getAttribute(b)&&c.push(f)}return c}function l(a,b){b||(b=location.href);a=a.replace(/[\[]/,"\\[").replace(/[\]]/,
    "\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==a?null:a[1]}var m=[],r="function"===typeof a.MutationObserver,u=a.document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:a.document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!1)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},q=document.currentScript||function(){var a=document.getElementsByTagName("script");return a[a.length-1]}(),
    t=l("prefix",q.src)||"";q=parseInt(l("autorun",q.src)||1);var w=function(){v(t)},v=function(a){t=a||t;for(var d=k("exposure-tag"),e=0;e<d.length;e++)(function(){var a=e,c=d[a].getAttribute("exposure-tag").split(",");b.addEvent(d[a],"click",function(){MossoSendClick&&MossoSendClick("hotspot",c[0],c[1],PTTRun.virtualURL)})})(),c(d[e],function(a){a=a.getAttribute("exposure-tag").split(",");MossoSendClick&&MossoSendClick("exposure",a[0],a[1],PTTRun.virtualURL)})},x=function(){var a=[],c,d=document,e=
    (d.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(d.readyState);e||b.addEvent(d,"DOMContentLoaded",c=function(){d.removeEventListener("DOMContentLoaded",c);for(e=1;c=a.shift();)c()});return function(b){e?setTimeout(b,0):a.push(b)}}();q?x(w):function(){window.exposure={};exposure.run=function(a){v(a)}}()};b.newStayTime=function(a){for(var b=[3,7,10,15,30,60,90,120,180,300,600,900,1800,3600],d="infinite",e=1,f=b.length;e<f;e++)if(a<b[e]){d=b[e-1];break}MossoSendClick("newStayTime",d,"\u505c\u7559\u65f6\u957f",
    PTTRun.virtualURL)}}})();window.console=window.console||function(){var h={};h.log=h.warn=h.debug=h.info=h.error=h.time=h.dir=h.profile=h.clear=h.exception=h.trace=h.assert=function(){};return h}();